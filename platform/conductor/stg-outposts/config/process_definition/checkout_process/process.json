{
  "ownerApp": null,
  "createTime": 1725524756229,
  "updateTime": 1730546803366,
  "createdBy": "siddhartha.moitra@mckinsey.com",
  "updatedBy": "mina.ishak@btech.com",
  "name": "checkout_process",
  "description": "Checkout workflow end 2 end for the full checkout journey for consumer loan",
  "version": 61,
  "tasks": [
    {
      "name": "prerequisites",
      "taskReferenceName": "prerequisites_ref",
      "description": null,
      "inputParameters": {},
      "type": "FORK_JOIN",
      "dynamicTaskNameParam": null,
      "caseValueParam": null,
      "caseExpression": null,
      "scriptExpression": null,
      "dynamicForkJoinTasksParam": null,
      "dynamicForkTasksParam": null,
      "dynamicForkTasksInputParamName": null,
      "forkTasks": [
        [
          {
            "name": "is_consumer_active",
            "taskReferenceName": "is_consumer_active",
            "description": null,
            "inputParameters": {
              "consumer_id": "${workflow.input.checkout_basket.consumer_id}"
            },
            "type": "SIMPLE",
            "dynamicTaskNameParam": null,
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": null,
            "retryCount": null,
            "evaluatorType": null,
            "expression": null
          },
          {
            "name": "check_consumers_sanction_list",
            "taskReferenceName": "check_consumers_sanction_list",
            "description": null,
            "inputParameters": {
              "national_id": "${is_consumer_active.output.ssn}",
              "full_name": "${is_consumer_active.output.name}"
            },
            "type": "SIMPLE",
            "dynamicTaskNameParam": "checks if consumer is in sacntiion liist and send sanction notification",
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": null,
            "retryCount": null,
            "evaluatorType": null,
            "expression": null
          }
        ],
        [
          {
            "name": "is_checkout_in_progress",
            "taskReferenceName": "is_checkout_in_progress",
            "description": null,
            "inputParameters": {
              "cashier_id": "${workflow.input.checkout_basket.cashier_id}",
              "checkout_basket_id": "${workflow.input.checkout_basket.id}",
              "consumer_id": "${workflow.input.checkout_basket.consumer_id}"
            },
            "type": "SIMPLE",
            "dynamicTaskNameParam": null,
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": null,
            "retryCount": null,
            "evaluatorType": null,
            "expression": null
          }
        ],
        [
          {
            "name": "get_credit_limit",
            "taskReferenceName": "vas_get_consumer_credit_limit",
            "description": null,
            "inputParameters": {
              "consumer_id": "${workflow.input.checkout_basket.consumer_id}"
            },
            "type": "SIMPLE",
            "dynamicTaskNameParam": null,
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": null,
            "retryCount": null,
            "evaluatorType": null,
            "expression": null
          }
        ],
        [
          {
            "name": "is_partner_active",
            "taskReferenceName": "is_partner_active",
            "description": null,
            "inputParameters": {
              "partner_id": "${workflow.input.checkout_basket.partner_id}"
            },
            "type": "SIMPLE",
            "dynamicTaskNameParam": null,
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": null,
            "retryCount": null,
            "evaluatorType": null,
            "expression": null
          }
        ],
        [
          {
            "name": "select_financial_products",
            "taskReferenceName": "select_financial_products",
            "description": null,
            "inputParameters": {
              "partner": {
                "category": "${workflow.input.checkout_basket.category}",
                "governorate": "${workflow.input.governorate.name_en}",
                "branch": "${workflow.input.branch}",
                "name": "${workflow.input.partner.name}"
              },
              "checkout": {
                "channel": "${workflow.input.checkout_basket.origination_channel}",
                "date": "${workflow.input.booking_time}"
              }
            },
            "type": "SIMPLE",
            "dynamicTaskNameParam": null,
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": null,
            "retryCount": null,
            "evaluatorType": null,
            "expression": null
          }
        ]
      ],
      "startDelay": 0,
      "subWorkflowParam": null,
      "sink": null,
      "optional": false,
      "taskDefinition": null,
      "rateLimited": null,
      "asyncComplete": false,
      "loopCondition": null,
      "retryCount": null,
      "evaluatorType": null,
      "expression": null
    },
    {
      "name": "prerequisites_join",
      "taskReferenceName": "prerequisites_join_ref",
      "description": null,
      "inputParameters": {},
      "type": "JOIN",
      "dynamicTaskNameParam": null,
      "caseValueParam": null,
      "caseExpression": null,
      "scriptExpression": null,
      "dynamicForkJoinTasksParam": null,
      "dynamicForkTasksParam": null,
      "dynamicForkTasksInputParamName": null,
      "startDelay": 0,
      "subWorkflowParam": null,
      "joinOn": [
        "is_consumer_active",
        "check_consumers_sanction_list",
        "is_checkout_in_progress",
        "vas_get_consumer_credit_limit",
        "is_partner_active",
        "select_financial_products"
      ],
      "sink": null,
      "optional": false,
      "taskDefinition": null,
      "rateLimited": null,
      "asyncComplete": false,
      "loopCondition": null,
      "retryCount": null,
      "evaluatorType": null,
      "expression": null
    },
    {
      "name": "lms_load_financial_product",
      "taskReferenceName": "lms_load_financial_product",
      "description": null,
      "inputParameters": {
        "selected_financial_products": "${select_financial_products.output.products}"
      },
      "type": "SIMPLE",
      "dynamicTaskNameParam": null,
      "caseValueParam": null,
      "caseExpression": null,
      "scriptExpression": null,
      "dynamicForkJoinTasksParam": null,
      "dynamicForkTasksParam": null,
      "dynamicForkTasksInputParamName": null,
      "startDelay": 0,
      "subWorkflowParam": null,
      "sink": null,
      "optional": false,
      "taskDefinition": null,
      "rateLimited": null,
      "asyncComplete": false,
      "loopCondition": null,
      "retryCount": null,
      "evaluatorType": null,
      "expression": null
    },
    {
      "name": "lms_create_commercial_offers",
      "taskReferenceName": "lms_create_commercial_offers",
      "description": null,
      "inputParameters": {
        "basket_id": "${workflow.input.checkout_basket.id}",
        "consumer_id": "${workflow.input.checkout_basket.consumer_id}",
        "credit_limit": {
          "currency_code": "EGP",
          "units": "${vas_get_consumer_credit_limit.output.credit_limit}"
        },
        "principal_amount": {
          "currency_code": "EGP",
          "units": "${workflow.input.checkout_basket.gross_basket_value}"
        },
        "selected_financial_products": "${select_financial_products.output.products}"
      },
      "type": "SIMPLE",
      "dynamicTaskNameParam": null,
      "caseValueParam": null,
      "caseExpression": null,
      "scriptExpression": null,
      "dynamicForkJoinTasksParam": null,
      "dynamicForkTasksParam": null,
      "dynamicForkTasksInputParamName": null,
      "startDelay": 0,
      "subWorkflowParam": null,
      "sink": null,
      "optional": false,
      "taskDefinition": null,
      "rateLimited": null,
      "asyncComplete": false,
      "loopCondition": null,
      "retryCount": null,
      "evaluatorType": null,
      "expression": null
    },
    {
      "name": "save_commercial_offers",
      "taskReferenceName": "save_commercial_offers",
      "description": null,
      "inputParameters": {
        "offer_details": "${lms_create_commercial_offers.output.offer_details}"
      },
      "type": "SIMPLE",
      "dynamicTaskNameParam": null,
      "caseValueParam": null,
      "caseExpression": null,
      "scriptExpression": null,
      "dynamicForkJoinTasksParam": null,
      "dynamicForkTasksParam": null,
      "dynamicForkTasksInputParamName": null,
      "startDelay": 0,
      "subWorkflowParam": null,
      "sink": null,
      "optional": false,
      "taskDefinition": null,
      "rateLimited": null,
      "asyncComplete": false,
      "loopCondition": null,
      "retryCount": null,
      "evaluatorType": null,
      "expression": null
    },
    {
      "name": "commercial_offer_selection",
      "taskReferenceName": "commercial_offer_selection",
      "description": null,
      "inputParameters": {},
      "type": "HUMAN",
      "dynamicTaskNameParam": null,
      "caseValueParam": null,
      "caseExpression": null,
      "scriptExpression": null,
      "dynamicForkJoinTasksParam": null,
      "dynamicForkTasksParam": null,
      "dynamicForkTasksInputParamName": null,
      "startDelay": 0,
      "subWorkflowParam": null,
      "sink": null,
      "optional": false,
      "taskDefinition": null,
      "rateLimited": null,
      "asyncComplete": false,
      "loopCondition": null,
      "retryCount": null,
      "evaluatorType": null,
      "expression": null
    },
    {
      "name": "commercial_offer_selection_validated",
      "taskReferenceName": "commercial_offer_selection_validated",
      "description": null,
      "inputParameters": {
        "commercial_offers": "${lms_create_commercial_offers.output.offer_details}",
        "selected_offer_id": "${commercial_offer_selection.output.selected_offer_id}"
      },
      "type": "SWITCH",
      "dynamicTaskNameParam": null,
      "caseValueParam": null,
      "caseExpression": null,
      "scriptExpression": null,
      "decisionCases": {
        "InValid": [
          {
            "name": "terminate_commercial_offer_selection",
            "taskReferenceName": "terminate_commercial_offer_selection",
            "description": null,
            "inputParameters": {
              "terminationReason": "Invalid commercial offer selected",
              "terminationStatus": "COMPLETED"
            },
            "type": "TERMINATE",
            "dynamicTaskNameParam": null,
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": null,
            "retryCount": null,
            "evaluatorType": null,
            "expression": null
          }
        ],
        "Valid": [
          {
            "name": "otp_loop",
            "taskReferenceName": "otp_loop",
            "description": null,
            "inputParameters": {
              "value": "${workflow.input.value}"
            },
            "type": "DO_WHILE",
            "dynamicTaskNameParam": null,
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": "if ( ($.otp_loop['iteration'] < 3 ) && ( $.otp_workflow['result']=='NOT_VERIFIED')) { true; } else { false; }",
            "loopOver": [
              {
                "name": "otp_workflow",
                "taskReferenceName": "otp_workflow",
                "description": null,
                "inputParameters": {
                  "admin_fee": "${commercial_offer_selection.output.admin_fee.units}",
                  "consumer_id": "${workflow.input.checkout_basket.consumer_id}",
                  "down_payment": "${commercial_offer_selection.output.down_payment.units}",
                  "monthly_installment": "${commercial_offer_selection.output.monthly_instalment.units}",
                  "num_of_months": "${commercial_offer_selection.output.tenure}",
                  "partner_id": "${workflow.input.checkout_basket.partner_id}",
                  "total_amount": "${commercial_offer_selection.output.total_amount.units}"
                },
                "type": "SUB_WORKFLOW",
                "dynamicTaskNameParam": null,
                "caseValueParam": null,
                "caseExpression": null,
                "scriptExpression": null,
                "dynamicForkJoinTasksParam": null,
                "dynamicForkTasksParam": null,
                "dynamicForkTasksInputParamName": null,
                "startDelay": 0,
                "subWorkflowParam": {
                  "name": "otp_workflow",
                  "version": null,
                  "taskToDomain": null,
                  "workflowDefinition": null
                },
                "sink": null,
                "optional": false,
                "taskDefinition": null,
                "rateLimited": null,
                "asyncComplete": false,
                "loopCondition": null,
                "retryCount": null,
                "evaluatorType": null,
                "expression": null
              }
            ],
            "retryCount": null,
            "evaluatorType": null,
            "expression": null
          },
          {
            "name": "check_otp_verification_result",
            "taskReferenceName": "check_otp_verification_result",
            "description": null,
            "inputParameters": {
              "loop_result": "${otp_loop.output}"
            },
            "type": "SWITCH",
            "dynamicTaskNameParam": null,
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "decisionCases": {
              "NOT_VERIFIED": [
                {
                  "name": "otp_not_verified",
                  "taskReferenceName": "otp_not_verified",
                  "description": null,
                  "inputParameters": {
                    "terminationReason": "OTP verification failed",
                    "terminationStatus": "FAILED"
                  },
                  "type": "TERMINATE",
                  "dynamicTaskNameParam": null,
                  "caseValueParam": null,
                  "caseExpression": null,
                  "scriptExpression": null,
                  "dynamicForkJoinTasksParam": null,
                  "dynamicForkTasksParam": null,
                  "dynamicForkTasksInputParamName": null,
                  "startDelay": 0,
                  "subWorkflowParam": null,
                  "sink": null,
                  "optional": false,
                  "taskDefinition": null,
                  "rateLimited": null,
                  "asyncComplete": false,
                  "loopCondition": null,
                  "retryCount": null,
                  "evaluatorType": null,
                  "expression": null
                }
              ],
              "VERIFIED": [
                {
                  "name": "pos_clearence",
                  "taskReferenceName": "pos_clearence",
                  "description": null,
                  "inputParameters": {},
                  "type": "HUMAN",
                  "dynamicTaskNameParam": null,
                  "caseValueParam": null,
                  "caseExpression": null,
                  "scriptExpression": null,
                  "dynamicForkJoinTasksParam": null,
                  "dynamicForkTasksParam": null,
                  "dynamicForkTasksInputParamName": null,
                  "startDelay": 0,
                  "subWorkflowParam": null,
                  "sink": null,
                  "optional": false,
                  "taskDefinition": null,
                  "rateLimited": null,
                  "asyncComplete": false,
                  "loopCondition": null,
                  "retryCount": null,
                  "evaluatorType": null,
                  "expression": null
                },
                {
                  "name": "update_credit_limit",
                  "taskReferenceName": "vas_update_consumer_credit_limit",
                  "description": null,
                  "inputParameters": {
                    "amount": "${commercial_offer_selection.output.financed_amount.units}",
                    "consumer_id": "${workflow.input.checkout_basket.consumer_id}",
                    "direction": "DECREASE"
                  },
                  "type": "SIMPLE",
                  "dynamicTaskNameParam": null,
                  "caseValueParam": null,
                  "caseExpression": null,
                  "scriptExpression": null,
                  "dynamicForkJoinTasksParam": null,
                  "dynamicForkTasksParam": null,
                  "dynamicForkTasksInputParamName": null,
                  "startDelay": 0,
                  "subWorkflowParam": null,
                  "sink": null,
                  "optional": false,
                  "taskDefinition": null,
                  "rateLimited": null,
                  "asyncComplete": false,
                  "loopCondition": null,
                  "retryCount": null,
                  "evaluatorType": null,
                  "expression": null
                },
                {
                  "name": "lms_activate_loan",
                  "taskReferenceName": "lms_activate_loan",
                  "description": null,
                  "inputParameters": {
                    "booking_time": "${workflow.input.booking_time}",
                    "consumer_id": "${workflow.input.checkout_basket.consumer_id}",
                    "consumer_single_payment_day": "${workflow.input.consumer_single_payment_day}",
                    "merchant_id": "${workflow.input.checkout_basket.partner_id}",
                    "selected_offer_id": "${commercial_offer_selection.output.selected_offer_id}",
                    "user_id": "${workflow.input.user_id}"
                  },
                  "type": "SIMPLE",
                  "dynamicTaskNameParam": null,
                  "caseValueParam": null,
                  "caseExpression": null,
                  "scriptExpression": null,
                  "dynamicForkJoinTasksParam": null,
                  "dynamicForkTasksParam": null,
                  "dynamicForkTasksInputParamName": null,
                  "startDelay": 0,
                  "subWorkflowParam": null,
                  "sink": null,
                  "optional": false,
                  "taskDefinition": null,
                  "rateLimited": null,
                  "asyncComplete": false,
                  "loopCondition": null,
                  "retryCount": null,
                  "evaluatorType": null,
                  "expression": null
                },
                {
                  "name": "create_invoicing_transaction_record_task",
                  "taskReferenceName": "create_invoicing_transaction_record_task",
                  "description": null,
                  "inputParameters": {
                    "reference_id": "${lms_activate_loan.output.activated_loan.loan_id}",
                    "payment_account_id": "${lms_activate_loan.output.activated_loan.merchant_account_id}",
                    "payable_units": "${lms_activate_loan.output.activated_loan.merchant_payable_amount}",
                    "payable_currency": "EGP",
                    "narration_comment": "Loan activation ${lms_activate_loan.output.activated_loan.loan_id}",
                    "transaction_date": "${workflow.input.booking_time}"
                  },
                  "type": "SIMPLE",
                  "dynamicTaskNameParam": null,
                  "caseValueParam": null,
                  "caseExpression": null,
                  "scriptExpression": null,
                  "dynamicForkJoinTasksParam": null,
                  "dynamicForkTasksParam": null,
                  "dynamicForkTasksInputParamName": null,
                  "startDelay": 0,
                  "subWorkflowParam": null,
                  "sink": null,
                  "optional": false,
                  "taskDefinition": null,
                  "rateLimited": null,
                  "asyncComplete": false,
                  "loopCondition": null,
                  "retryCount": null,
                  "evaluatorType": null,
                  "expression": null
                },
                {
                  "name": "final_ops",
                  "taskReferenceName": "final_ops_ref",
                  "description": null,
                  "inputParameters": {},
                  "type": "FORK_JOIN",
                  "dynamicTaskNameParam": null,
                  "caseValueParam": null,
                  "caseExpression": null,
                  "scriptExpression": null,
                  "dynamicForkJoinTasksParam": null,
                  "dynamicForkTasksParam": null,
                  "dynamicForkTasksInputParamName": null,
                  "forkTasks": [
                    [
                      {
                        "name": "update_checkout_basket_loan_id",
                        "taskReferenceName": "update_checkout_basket_loan_id",
                        "description": null,
                        "inputParameters": {
                          "checkout_basket_id": "${workflow.input.checkout_basket.id}",
                          "loan_id": "${lms_activate_loan.output.activated_loan.loan_id}"
                        },
                        "type": "SIMPLE",
                        "dynamicTaskNameParam": null,
                        "caseValueParam": null,
                        "caseExpression": null,
                        "scriptExpression": null,
                        "dynamicForkJoinTasksParam": null,
                        "dynamicForkTasksParam": null,
                        "dynamicForkTasksInputParamName": null,
                        "startDelay": 0,
                        "subWorkflowParam": null,
                        "sink": null,
                        "optional": false,
                        "taskDefinition": null,
                        "rateLimited": null,
                        "asyncComplete": false,
                        "loopCondition": null,
                        "retryCount": null,
                        "evaluatorType": null,
                        "expression": null
                      },
                      {
                        "name": "update_checkout_basket_status",
                        "taskReferenceName": "update_checkout_basket_status",
                        "description": null,
                        "inputParameters": {
                          "status": "LOAN_ACTIVATED"
                        },
                        "type": "SIMPLE",
                        "dynamicTaskNameParam": null,
                        "caseValueParam": null,
                        "caseExpression": null,
                        "scriptExpression": null,
                        "dynamicForkJoinTasksParam": null,
                        "dynamicForkTasksParam": null,
                        "dynamicForkTasksInputParamName": null,
                        "startDelay": 0,
                        "subWorkflowParam": null,
                        "sink": null,
                        "optional": false,
                        "taskDefinition": null,
                        "rateLimited": null,
                        "asyncComplete": false,
                        "loopCondition": null,
                        "retryCount": null,
                        "evaluatorType": null,
                        "expression": null
                      }
                    ],
                    [
                      {
                        "name": "send_consumer_confirmation_sms",
                        "taskReferenceName": "send_consumer_confirmation_sms",
                        "description": null,
                        "inputParameters": {},
                        "type": "SIMPLE",
                        "dynamicTaskNameParam": null,
                        "caseValueParam": null,
                        "caseExpression": null,
                        "scriptExpression": null,
                        "dynamicForkJoinTasksParam": null,
                        "dynamicForkTasksParam": null,
                        "dynamicForkTasksInputParamName": null,
                        "startDelay": 0,
                        "subWorkflowParam": null,
                        "sink": null,
                        "optional": true,
                        "taskDefinition": null,
                        "rateLimited": null,
                        "asyncComplete": false,
                        "loopCondition": null,
                        "retryCount": null,
                        "evaluatorType": null,
                        "expression": null
                      }
                    ]
                  ],
                  "startDelay": 0,
                  "subWorkflowParam": null,
                  "sink": null,
                  "optional": false,
                  "taskDefinition": null,
                  "rateLimited": null,
                  "asyncComplete": false,
                  "loopCondition": null,
                  "retryCount": null,
                  "evaluatorType": null,
                  "expression": null
                },
                {
                  "name": "final_ops_join",
                  "taskReferenceName": "final_ops_join_ref",
                  "description": null,
                  "inputParameters": {},
                  "type": "JOIN",
                  "dynamicTaskNameParam": null,
                  "caseValueParam": null,
                  "caseExpression": null,
                  "scriptExpression": null,
                  "dynamicForkJoinTasksParam": null,
                  "dynamicForkTasksParam": null,
                  "dynamicForkTasksInputParamName": null,
                  "startDelay": 0,
                  "subWorkflowParam": null,
                  "joinOn": [
                    "update_checkout_basket_loan_id",
                    "update_checkout_basket_status",
                    "send_consumer_confirmation_sms"
                  ],
                  "sink": null,
                  "optional": false,
                  "taskDefinition": null,
                  "rateLimited": null,
                  "asyncComplete": false,
                  "loopCondition": null,
                  "retryCount": null,
                  "evaluatorType": null,
                  "expression": null
                }
              ]
            },
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": null,
            "retryCount": null,
            "evaluatorType": "javascript",
            "expression": "$.loop_result[$.loop_result['iteration'].toString()]['otp_workflow']['result']== 'VERIFIED' ? 'VERIFIED' : 'NOT_VERIFIED' "
          }
        ]
      },
      "dynamicForkJoinTasksParam": null,
      "dynamicForkTasksParam": null,
      "dynamicForkTasksInputParamName": null,
      "startDelay": 0,
      "subWorkflowParam": null,
      "sink": null,
      "optional": false,
      "taskDefinition": null,
      "rateLimited": null,
      "asyncComplete": false,
      "loopCondition": null,
      "retryCount": null,
      "evaluatorType": "javascript",
      "expression": "(function(){ if (!$.commercial_offers || !$.selected_offer_id ) { return 'Not_Valid' } for(var i = 0; i < $.commercial_offers.length; i++){ if ($.commercial_offers[i].id == $.selected_offer_id) return 'Valid'} return 'Not_Valid' })()"
    }
  ],
  "inputParameters": [],
  "outputParameters": {
    "activated_loan": "${lms_activate_loan.output.activated_loan}"
  },
  "failureWorkflow": "checkout_basket_failure_workflow",
  "schemaVersion": 2,
  "restartable": true,
  "workflowStatusListenerEnabled": false,
  "ownerEmail": "siddhartha_moitra@mckinsey.com",
  "timeoutPolicy": "TIME_OUT_WF",
  "timeoutSeconds": 3600,
  "variables": {},
  "inputTemplate": {}
}