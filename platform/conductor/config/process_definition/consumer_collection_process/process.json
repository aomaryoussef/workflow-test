{
  "ownerApp": null,
  "createTime": 1724585735459,
  "updateTime": 1727417739627,
  "createdBy": "ibrahim.awad@btech.com",
  "updatedBy": null,
  "name": "consumer_collection_process",
  "description": "Collecting and Processing consumer payments against their active loans",
  "version": 12,
  "tasks": [
    {
      "name": "fork",
      "taskReferenceName": "fork_ref",
      "description": null,
      "inputParameters": {},
      "type": "FORK_JOIN",
      "dynamicTaskNameParam": null,
      "caseValueParam": null,
      "caseExpression": null,
      "scriptExpression": null,
      "dynamicForkJoinTasksParam": null,
      "dynamicForkTasksParam": null,
      "dynamicForkTasksInputParamName": null,
      "forkTasks": [
        [
          {
            "name": "send_installment_payment_notification",
            "taskReferenceName": "send_installment_payment_notification",
            "description": "Send notification to the consumer for successful payment",
            "inputParameters": {
              "consumer_id": "${workflow.input.consumer_id}",
              "paid_amount_units": "${workflow.input.payment_details.amount_units}"
            },
            "type": "SIMPLE",
            "dynamicTaskNameParam": null,
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": null,
            "retryCount": null,
            "evaluatorType": null,
            "expression": null
          }
        ],
        [
          {
            "name": "process_mylo_repayments",
            "taskReferenceName": "process_mylo_repayments",
            "description": null,
            "inputParameters": {
              "payment_id": "${workflow.input.payment_details.id}",
              "booking_time": "${workflow.input.booking_time}",
              "payment_channel": "${workflow.input.payment_channel}",
              "mylo_repayments": "${workflow.input.mylo_repayments}"
            },
            "type": "SIMPLE",
            "dynamicTaskNameParam": null,
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": null,
            "retryCount": null,
            "evaluatorType": null,
            "expression": null
          },
          {
            "name": "update_credit_limit",
            "taskReferenceName": "update_credit_limit",
            "description": null,
            "inputParameters": {
              "amount": "${process_mylo_repayments.output.total_principal_paid}",
              "consumer_id": "${workflow.input.consumer_id}",
              "direction": "INCREASE"
            },
            "type": "SIMPLE",
            "dynamicTaskNameParam": null,
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": null,
            "retryCount": null,
            "evaluatorType": null,
            "expression": null
          }
        ],
        [
          {
            "name": "book_collection_to_treasury",
            "taskReferenceName": "book_collection_to_mylo_treasury",
            "description": null,
            "inputParameters": {
              "treasury_type": "MYLO",
              "payment_id": "${workflow.input.payment_details.id}",
              "booking_time": "${workflow.input.booking_time}",
              "payment_channel": "${workflow.input.payment_channel}",
              "amount": "${workflow.input.payment_details.amount_units}",
              "metadata": "${workflow.input.payment_details.raw_request}"
            },
            "type": "SIMPLE",
            "dynamicTaskNameParam": null,
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": null,
            "retryCount": null,
            "evaluatorType": null,
            "expression": null
          }
        ],
        [
          {
            "name": "check_payment_channel",
            "taskReferenceName": "check_payment_channel",
            "description": null,
            "inputParameters": {
              "payment_channel": "${workflow.input.payment_channel}"
            },
            "type": "SWITCH",
            "dynamicTaskNameParam": null,
            "caseValueParam": null,
            "caseExpression": null,
            "scriptExpression": null,
            "decisionCases": {
              "BTECH_STORE_CASH": [
                {
                  "name": "book_collection_to_treasury",
                  "taskReferenceName": "book_collection_to_btech_treasury",
                  "description": null,
                  "inputParameters": {
                    "treasury_type": "BTECH",
                    "payment_id": "${workflow.input.payment_details.id}",
                    "booking_time": "${workflow.input.booking_time}",
                    "payment_channel": "${workflow.input.payment_channel}",
                    "amount": "${workflow.input.payment_details.amount_units}",
                    "metadata": "${workflow.input.payment_details.raw_request}"
                  },
                  "type": "SIMPLE",
                  "dynamicTaskNameParam": null,
                  "caseValueParam": null,
                  "caseExpression": null,
                  "scriptExpression": null,
                  "dynamicForkJoinTasksParam": null,
                  "dynamicForkTasksParam": null,
                  "dynamicForkTasksInputParamName": null,
                  "startDelay": 0,
                  "subWorkflowParam": null,
                  "sink": null,
                  "optional": false,
                  "taskDefinition": null,
                  "rateLimited": null,
                  "asyncComplete": false,
                  "loopCondition": null,
                  "retryCount": null,
                  "evaluatorType": null,
                  "expression": null
                }
              ]
            },
            "dynamicForkJoinTasksParam": null,
            "dynamicForkTasksParam": null,
            "dynamicForkTasksInputParamName": null,
            "startDelay": 0,
            "subWorkflowParam": null,
            "sink": null,
            "optional": false,
            "taskDefinition": null,
            "rateLimited": null,
            "asyncComplete": false,
            "loopCondition": null,
            "retryCount": null,
            "evaluatorType": "javascript",
            "expression": "$.payment_channel"
          }
        ]
      ],
      "startDelay": 0,
      "subWorkflowParam": null,
      "sink": null,
      "optional": false,
      "taskDefinition": null,
      "rateLimited": null,
      "asyncComplete": false,
      "loopCondition": null,
      "retryCount": null,
      "evaluatorType": null,
      "expression": null
    },
    {
      "name": "fork_join",
      "taskReferenceName": "fork_join_ref",
      "description": null,
      "inputParameters": {},
      "type": "JOIN",
      "dynamicTaskNameParam": null,
      "caseValueParam": null,
      "caseExpression": null,
      "scriptExpression": null,
      "dynamicForkJoinTasksParam": null,
      "dynamicForkTasksParam": null,
      "dynamicForkTasksInputParamName": null,
      "startDelay": 0,
      "subWorkflowParam": null,
      "sink": null,
      "optional": false,
      "taskDefinition": null,
      "rateLimited": null,
      "asyncComplete": false,
      "loopCondition": null,
      "retryCount": null,
      "evaluatorType": null,
      "expression": null
    }
  ],
  "inputParameters": [
    "consumer_id",
    "booking_time",
    "payment_channel",
    "payment_details",
    "mylo_repayments"
  ],
  "outputParameters": {},
  "failureWorkflow": null,
  "schemaVersion": 2,
  "restartable": true,
  "workflowStatusListenerEnabled": false,
  "ownerEmail": "siddhartha_moitra@mckinsey.com",
  "timeoutPolicy": "TIME_OUT_WF",
  "timeoutSeconds": 3600,
  "variables": {},
  "inputTemplate": {}
}